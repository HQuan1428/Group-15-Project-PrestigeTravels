<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        {{> profileSidebar}}
        <!-- Main Content -->
        <div class="col-md-9 content">
            <div class="card">
                <div class="card-body">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Tour Title</th>
                                <th>Description</th>
                                <th>Price</th>
                                <th>Adults</th>
                                <th>Children</th>
                                <th>Total Price</th>
                                <th>Status</th>
                                <th>Booking Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each bookTour}}
                            <tr>
                                <td>{{title}}</td>
                                <td>
                                    <div class="description-container">
                                        <div class="short-desc">
                                            {{truncate description 100}}
                                        </div>
                                        <div class="full-desc" style="display: none;">
                                            {{description}}
                                        </div>
                                        {{#if (isLongerThan description 100)}}
                                            <button class="btn btn-link btn-sm read-more">Xem thêm</button>
                                        {{/if}}
                                    </div>
                                </td>
                                <td>${{price}}</td>
                                <td>{{adults}}</td>
                                <td>{{children}}</td>
                                <td>${{total_price}}</td>
                                <td>{{booking_status}}</td>
                                <td>{{formatDate booking_date}}</td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.description-container {
    position: relative;
}

.short-desc {
    margin-bottom: 5px;
}

.read-more {
    padding: 0;
    color: #0d6efd;
    text-decoration: none;
}

.read-more:hover {
    text-decoration: underline;
}
</style>

<script>
document.querySelectorAll('.read-more').forEach(button => {
    button.addEventListener('click', function() {
        const container = this.closest('.description-container');
        const shortDesc = container.querySelector('.short-desc');
        const fullDesc = container.querySelector('.full-desc');
        
        if (shortDesc.style.display !== 'none') {
            shortDesc.style.display = 'none';
            fullDesc.style.display = 'block';
            this.textContent = 'Thu gọn';
        } else {
            shortDesc.style.display = 'block';
            fullDesc.style.display = 'none';
            this.textContent = 'Xem thêm';
        }
    });
});
</script>