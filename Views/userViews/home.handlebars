<!-- Body -->
<div class="container-fluid px-3 py-4">
    <!-- Image Banner and Title Section -->
    <div class="row align-items-center mb-4">
        <div class="col-12 col-md-2 text-center text-md-left">
            <img class="img-fluid"
                src="https://ik.imagekit.io/tvlk/image/imageResource/2024/09/11/1726052438498-19ccbda89dcc327a785f197276581f2a.png?_src=imagekit&tr=q-40,h-24"
                alt="Top địa điểm">
        </div>
        <div class="col-12 col-md-10 text-center text-md-left">
            <div class="title display-5 text-primary font-weight-bold">Top Địa điểm được yêu thích nhất</div>
        </div>
    </div>

    <!-- Location Buttons -->
    <div class="row justify-content-center mb-4" id="location-buttons">
        {{#each location}}
        <div class="col-6 col-sm-4 col-md-2 mb-2 text-center">
            <button class="btn btn-outline-primary w-100" data-location-id="{{this.id}}">{{this.name}}</button>
        </div>
        {{/each}}
    </div>

    <!-- Tour List Section -->
    <div id="tour-list" class="row">
        <!-- Các tour sẽ được hiển thị ở đây -->
    </div>

    <!-- Features Section -->
    <div class="container my-5">
        <div class="text-center mb-4">
            <h2 class="text-primary">Lý do nên đặt chỗ với Prestige Travels</h2>
        </div>
        <div class="row text-center">
            <!-- Feature 1 -->
            <div class="col-md-4 mb-4">
                <div class="card shadow border-0">
                    <img src="https://ik.imagekit.io/tvlk/image/imageResource/2023/06/14/1686718236517-bf9a3e5ffd872b781ba2e56e93fe8840.webp?tr=h-64,q-75,w-64"
                        alt="Icon 1" class="card-img-top mx-auto mt-3" style="width: 64px; height: 64px;">
                    <div class="card-body">
                        <h5 class="card-title text-primary">Đáp ứng mọi nhu cầu của bạn</h5>
                        <p class="card-text">Từ chuyến bay, lưu trú, đến điểm tham quan, bạn có thể tin chọn sản phẩm
                            hoàn chỉnh và Hướng Dẫn Du Lịch của chúng tôi.</p>
                    </div>
                </div>
            </div>

            <!-- Feature 2 -->
            <div class="col-md-4 mb-4">
                <div class="card shadow border-0">
                    <img src="https://ik.imagekit.io/tvlk/image/imageResource/2023/06/14/1686718238370-9ef6b6e0701e9074614951c0bd49930c.webp?tr=h-64,q-75,w-64"
                        alt="Icon 2" class="card-img-top mx-auto mt-3" style="width: 64px; height: 64px;">
                    <div class="card-body">
                        <h5 class="card-title text-primary">Tùy chọn đặt chỗ linh hoạt</h5>
                        <p class="card-text">Kế hoạch thay đổi bất ngờ? Đừng lo! Đổi lịch hoặc Hoàn tiền dễ dàng.</p>
                    </div>
                </div>
            </div>

            <!-- Feature 3 -->
            <div class="col-md-4 mb-4">
                <div class="card shadow border-0">
                    <img src="https://ik.imagekit.io/tvlk/image/imageResource/2023/06/14/1686718240417-96131eb957c39a098a12d2d7926e3342.webp?tr=h-64,q-75,w-64"
                        alt="Icon 3" class="card-img-top mx-auto mt-3" style="width: 64px; height: 64px;">
                    <div class="card-body">
                        <h5 class="card-title text-primary">Thanh toán an toàn và thuận tiện</h5>
                        <p class="card-text">Tận hưởng nhiều cách thanh toán an toàn, bằng loại tiền thuận tiện nhất cho
                            bạn.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* General Styling */
    .container-fluid {
        background-color: #f8f9fa;
        padding: 20px;
    }

    .title {
        font-family: 'Arial', sans-serif;
        font-size: 36px;
        font-weight: bold;
        color: #ff69b4;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    /* Location Buttons */
    #location-buttons .btn {
        border: 2px solid #007bff;
        transition: 0.3s;
    }

    #location-buttons .btn {
        border-radius: 12px;
        padding: 12px 20px;
        font-size: 16px;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    #location-buttons .btn-outline-primary {
        border-color: #ff69b4;
        color: #ff69b4;
    }

    #location-buttons .btn:hover {
        background-color: #ff69b4;
        color: white;
        border-color: #ff69b4;
    }

    /* Hiệu ứng focus */
    #location-buttons .btn:focus {
        box-shadow: 0 0 10px rgba(255, 105, 180, 0.6);
    }

    h2.text-primary {
        font-family: 'Arial', sans-serif;
        font-size: 36px;
        font-weight: bold;
        color: #ff69b4;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }


    /* Card Styling */
    .card {
        border-radius: 10px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover {
        transform: translateY(-10px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);
    }

    .card-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #ff69b4;
        transition: color 0.3s ease;
    }

    .card:hover .card-title {
        color: #e6007e;
    }

    .card-text {
        font-size: 1rem;
        color: #555;
        line-height: 1.5;
    }

    .card-img-top {
        border-radius: 50%;
    }
    
</style>

<script>
    // Giả sử bạn đã truyền dữ liệu location từ server hoặc từ bên ngoài
    const location11 = {{{ json location }}}; // Lưu ý: Cần chuyển location thành dữ liệu hợp lệ từ phía server
    console.log(location11);

    // Hiển thị mặc định tour của địa điểm đầu tiên
    document.addEventListener('DOMContentLoaded', () => {
        if (location11 && location11.length > 0) {
            const firstLocation = location11[0]; // Lấy location đầu tiên
            displayTours(firstLocation); // Hiển thị tour của location đầu tiên

            // Đánh dấu nút của location đầu tiên
            const firstButton = document.querySelector(`[data-location-id="${firstLocation.id}"]`);
            if (firstButton) {
                firstButton.classList.add('active'); // Thêm class 'active' cho nút
            }
        }
    });

    // Xử lý sự kiện khi nhấn vào các nút location
    document.querySelectorAll('[data-location-id]').forEach(button => {
        button.addEventListener('click', function () {
            const locationId = this.getAttribute('data-location-id');
            const location = location11.find(loc => loc.id === parseInt(locationId));

            if (location) {
                displayTours(location);

                // Xóa class 'active' khỏi tất cả các nút
                document.querySelectorAll('[data-location-id]').forEach(btn => btn.classList.remove('active'));

                // Thêm class 'active' cho nút được nhấn
                this.classList.add('active');
            } else {
                console.log('No location found for this ID');
            }
        });
    });

    // Hàm để hiển thị các tour của địa điểm
    function displayTours(location) {
        const tourListContainer = document.getElementById('tour-list');
        tourListContainer.innerHTML = '';  // Xóa các tour cũ

        if (location && location.tours && location.tours.length > 0) {
            location.tours.forEach(tour => {
                const tourCard = document.createElement('div');
                tourCard.classList.add('col-md-4', 'mb-4');

                // Sử dụng trường `image` từ server
                const imageUrl = tour.image || '/default-image.jpg';

                tourCard.innerHTML = `
                <div class="card">
                    <img src="${imageUrl}" class="card-img-top" alt="${tour.title}">
                    <div class="card-body">
                        <h5 class="card-title">${tour.title}</h5>
                        
                        <a href="/customer/tours/${tour.id}" class="btn btn-primary">Chi tiết</a>
                    </div>
                </div>
            `;
                tourListContainer.appendChild(tourCard);
            });
        } else {
            tourListContainer.innerHTML = '<p>No tours available for this location.</p>';
        }
    }
</script>