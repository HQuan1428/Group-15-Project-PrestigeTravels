<div class="d-flex align-items-start">
    <!-- Link Home bên trái -->
    <div class="me-3">
        <a href="/admin" class="btn btn-outline-primary" style="margin-top: 20px;">Home</a>
    </div>

    <!-- Nội dung còn lại bên phải -->
    <div class="flex-grow-1">
        <h2 class="my-4">Quản lý tài khoản</h2>
        <table class="table table-striped table-bordered table-hover">
            <thead class="thead-light">
                <tr>
                    <th scope="col">Tên</th>
                    <th scope="col">Email</th>
                    <th scope="col">Số điện thoại</th>
                    <th scope="col">Loại tài khoản</th>
                    <th scope="col">Ngày đăng kí</th>
                    <th scope="col">Edit & Delete</th>
                </tr>
            </thead>
            <tbody id="accountTable">
               <!-- Hiển thị tài khoảnkhoản -->
            </tbody>
        </table>
        <!-- Phân trang -->
        <nav aria-label="Pagination">
        <ul class="pagination justify-content-end" id="pagination">
        </ul>
    </nav>

    </div>
</div>
<script>
    const accounts = {{{json accounts}}}; 
    console.log(accounts);
    const accountsPerPage = 10;
    let currentPage = 1;

    // Hàm hiển thị người dùng trên mỗi trang
    function displayAccounts(page) {
        const start = (page - 1) * accountsPerPage;
        const end = start + accountsPerPage;
        const accountsToDisplay = accounts.slice(start, end);
        
        // Clear bảng hiện tại
        const tableBody = document.getElementById('accountTable');
        tableBody.innerHTML = '';

        // Hiển thị các tài khoản trên bảng
        accountsToDisplay.forEach(account => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${account.fullname}</td>
                <td>${account.email}</td>
                <td>${account.phone}</td>
                <td>${account.role}</td>
                <td>${account.created_at}</td>
                <td>
                    <div class="dropdown">
                        <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false"></button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <li><a class="dropdown-item" href="/edit?${account.id}">Sửa</a></li>
                            <li><a class="dropdown-item" href="/delete?${account.id}">Xóa</a></li>
                        </ul>
                    </div>
                </td>
            `;
            tableBody.appendChild(row);
        });

        // Hiển thị phân trang
        displayPagination(page);
    }

    // Hàm hiển thị các nút phân trang
    function displayPagination(page) {
        const totalPages = Math.ceil(accounts.length / accountsPerPage);
        const pagination = document.getElementById('pagination');
        pagination.innerHTML = '';

        // Previous page
        if (page > 1) {
            pagination.innerHTML += `<li class="page-item"><a class="page-link" href="#" onclick="goToPage(${page - 1})"><<</a></li>`;
        }

        // Current page
        pagination.innerHTML += `<li class="page-item active"><a class="page-link" href="#">${page}</a></li>`;

        // Next page
        if (page < totalPages) {
            pagination.innerHTML += `<li class="page-item"><a class="page-link" href="#" onclick="goToPage(${page + 1})">>></a></li>`;
        }
    }

    // Hàm chuyển sang trang khác
    function goToPage(page) {
        currentPage = page;
        displayAccounts(page);
    }

    // Khởi tạo trang đầu tiên
    displayAccounts(currentPage);
</script>
